<!DOCTYPE html>
<html>
<head>
	<meta http-equiv="Content-type" content="text/html; charset=utf-8">
	<title>backchan.nl &mdash; thin</title>

	<script src="/static/js/jquery-1.6.2.min.js" type="text/javascript"></script>
	<script src="/socket.io/socket.io.js"></script>
	
	<script type="text/javascript" charset="utf-8">
		var socket = io.connect("http://<% server %>:<%= port %>");
	
		$(document).ready(function() {
			console.log("Document is ready!");
			
			$("#dashboard").hide();
			
			$("#identify form").submit(function(event) {
				// Send a message to the server.
				socket.emit("identify", {
					"name":$("#name").val(),
					"affiliation":$("#affiliation").val()});
				event.preventDefault();
			});
			
			// TODO save name/affiliation settings and auto-populate the form
			// with them to save time.
			
		});
		
		socket.on('connect', function(data) {
			console.log("Connected to server.");
		});
		
		socket.on('identify', function(data) {
			// When the server ACKS our identify operation, hide that pane
			// and show the main one.
			$("#identify").hide();
			$("#dashboard").show();
		});
		
	</script>
	
	<style type="text/css" media="screen">
		body {
			font-family: Helvetica, sans-serif;
		}
		
		#container {
			margin-left: auto;
			margin-right: auto;
			border: 1px solid black;
			
			width: 1000px;
			height: 150px;
		}
		
		#identify {
			margin-left: auto;
			margin-right: auto;
			width: 300px;
		}
		
		#identify h1 {
			font-size: 1.5em;
		}
		
		#identify table tr:first-child {
			text-align: right;
		}
		
		#identify input[type="text"] {
			width: 175px;
		}
		
		#dashboard {
			width: 100%;
			height: 100%;
		}
		
		#dashboard > div {
			float: left;
		}
		
		#dashboard > div h1 {
			background-color: black;
			color: white;
			width: 60px;
			text-align: center;
			
			margin-top: 0px;
		}
		
		#hot {
			width: 500px;
			border-right: 1px solid #ccc;
		}
		
		#hot h1 {
			float: left;
		}
		
		#new {
			width: 500px;
		}
		
		#new h1 {
			float: right;
		}
		
	</style>
</head>
<body id="index" onload="">
<div id="container">

<div id="identify">
	<h1>Welcome to backchan.nl!</h1>
	<form method="get" accept-charset="utf-8">
	<table border="0">
		<tr><td>Name</td><td><input type="text" name="name" value="" id="name"></tr>
		<tr><td>Affiliation</td><td><input type="text" name="affiliation" value="" id="affiliation"></td></tr>
		<tr><td></td><td><input type="submit" name="set_identity" value="login" id="set_identity"<></td></tr>
	</table>
	</form>
</div>


<div id="dashboard">
<div id="hot">
<h1>hot</h1>
</div>

<div id="new">
<h1>new</h1>


</div>

<div id="toggle-post">
post a thought
</div>

</div>

</div>
</body>
</html>